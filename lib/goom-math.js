define("src/vector3d",[],function(){var a=function(){function a(a,b,c){this.x=a!==null&&a!==undefined?a:0,this.y=b!==null&&b!==undefined?b:0,this.z=c!==null&&c!==undefined?c:0}return a.prototype.set=function(a,b,c){return this.x=a,this.y=b,this.z=c,this},a.prototype.clone=function(b){if(b===null||b===undefined)b=new a;return b.x=this.x,b.y=this.y,b.z=this.z,b},a.prototype.add=function(a,b){if(b===null||b===undefined)b=this;return b.x=this.x+a.x,b.y=this.y+a.y,b.z=this.z+a.z,b},a.prototype.scale=function(a,b){if(b===null||b===undefined)b=this;return b.x=this.x*a,b.y=this.y*a,b.z=this.z*a,b},a.prototype.substract=function(a,b){if(b===null||b===undefined)b=this;return b.x=this.x-a.x,b.y=this.y-a.y,b.z=this.z-a.z,b},a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},a.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},a.prototype.squaredMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z},a.prototype.crossProduct=function(a,b){var c,d;if(b===null||b===undefined)b=this;return c=this.y*a.z-this.z*a.y,d=this.z*a.x-this.x*a.z,b.z=this.x*a.y-this.y*a.x,b.x=c,b.y=d,b},a.prototype.dotProduct=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.componentProduct=function(a,b){if(b===null||b===undefined)b=this;return b.x=this.x*a.x,b.y=this.y*a.y,b.z=this.z*a.z,b},a.prototype.normalize=function(a){var b,c;if(a===null||a===undefined)a=this;return c=this.magnitude(),b=1/c,c===0?(a.x=0,a.y=0,a.z=0,a):c===1?(a.x=this.x,a.y=this.y,a.z=this.z,a):(a.x=this.x*b,a.y=this.y*b,a.z=this.z*b,a)},a.prototype.zero=function(){return this.x=this.y=this.z=0,this},a.RIGHT=new a(1,0,0),a.UP=new a(0,1,0),a.LEFT=new a(-1,0,0),a.DOWN=new a(0,-1,0),a.Z_AXIS=new a(0,0,1),a}();return a}),define("src/quaternion",["./vector3d"],function(a){var b=function(){function a(a,b,c,d){this.r=a!==null&&a!==undefined?a:1,this.i=b!==null&&b!==undefined?b:0,this.j=c!==null&&c!==undefined?c:0,this.k=d!==null&&d!==undefined?d:0}return a.prototype.makeIdentity=function(){return this.r=1,this.i=this.j=this.k=0,this},a.prototype.set=function(a,b,c,d){return this.r=a,this.i=b,this.j=c,this.k=d,this},a.prototype.normalize=function(){var a=this.r*this.r+this.i*this.i+this.j*this.j+this.k*this.k;return a===0?(this.r=1,this):(a=1/Math.sqrt(a),this.r*=a,this.i*=a,this.j*=a,this.k*=a,this)},a.prototype.multiply=function(a,b){if(b===null||b===undefined)b=this;var c=this.r*a.r-this.i*a.i-this.j*a.j-this.k*a.k,d=this.r*a.i+this.i*a.r+this.j*a.k-this.k*a.j,e=this.r*a.j+this.j*a.r+this.k*a.i-this.i*a.k;return b.k=this.r*a.k+this.k*a.r+this.i*a.j-this.j*a.i,b.r=c,b.i=d,b.j=e,b},a.prototype.rotateByVector=function(a,b){if(b===null||b===undefined)b=this;var c=-this.i*a.x-this.j*a.y-this.k*a.z,d=this.r*a.x+this.j*a.z-this.k*a.y,e=this.r*a.y+this.k*a.x-this.i*a.z;return b.k=this.r*a.z+this.i*a.y-this.j*a.x,b.r=c,b.i=d,b.j=e,b},a.prototype.addVector=function(a,b){if(b===null||b===undefined)b=this;var c=-a.x*this.i-a.y*this.j-a.z*this.k,d=a.x*this.r+a.y*this.k-a.z*this.j,e=a.y*this.r+a.z*this.i-a.x*this.k,f=a.z*this.r+a.x*this.j-a.y*this.i;return b.r=this.r+c*.5,b.i=this.i+d*.5,b.j=this.j+e*.5,b.k=this.k+f*.5,b},a}();return b}),define("src/matrix3d",["./vector3d"],function(a){var b=function(){function a(){typeof Float32Array!="undefined"&&Float32Array!==null?this.data=new Float32Array(9):this.data=new Array(9),this.makeIdentity()}return a.prototype.clone=function(b){if(b===null||b===undefined)b=new a;for(var c=0;c<=8;c++)b.data[c]=this.data[c];return b},a.prototype.set=function(a){for(var b=0;b<=8;b++)this.data[b]=a[b];return this},a.prototype.setDiagonal=function(a,b,c){return this.data[0]=a,this.data[4]=b,this.data[8]=c,this},a.prototype.makeFromVectors=function(a,b,c){return this.data[0]=a.x,this.data[1]=a.y,this.data[2]=a.z,this.data[3]=b.x,this.data[4]=b.y,this.data[5]=b.z,this.data[6]=c.x,this.data[7]=c.y,this.data[8]=c.z,this},a.prototype.makeSkewSymmetric=function(a){return this.data[0]=this.data[4]=this.data[8]=0,this.data[1]=a.z,this.data[2]=-a.y,this.data[3]=-a.z,this.data[5]=a.x,this.data[6]=a.y,this.data[7]=-a.x,this},a.prototype.makeIdentity=function(){for(var a=0;a<=8;a++)this.data[a]=0;return this.data[0]=this.data[4]=this.data[8]=1,this},a.prototype.transpose=function(a){if(a===null||a===undefined)a=this;var b=this.data[1];return a.data[1]=this.data[3],a.data[3]=b,b=this.data[2],a.data[2]=this.data[6],a.data[6]=b,b=this.data[5],a.data[5]=this.data[7],a.data[7]=b,a.data[0]=this.data[0],a.data[4]=this.data[4],a.data[8]=this.data[8],a},a.prototype.inverse=function(a){if(a===null||a===undefined)a=this;var b=this.data[0]*this.data[4],c=this.data[0]*this.data[7],d=this.data[3]*this.data[1],e=this.data[6]*this.data[1],f=this.data[3]*this.data[2],g=this.data[6]*this.data[2],h=b*this.data[8]-c*this.data[5]-d*this.data[8]+e*this.data[5]+f*this.data[7]-g*this.data[4];if(h===0)return a.data[0]=this.data[0],a.data[1]=this.data[1],a.data[2]=this.data[2],a.data[3]=this.data[3],a.data[4]=this.data[4],a.data[5]=this.data[5],a.data[6]=this.data[6],a.data[7]=this.data[7],a.data[8]=this.data[8],a;var i=1/h,j=(this.data[4]*this.data[8]-this.data[7]*this.data[5])*i,k=-(this.data[1]*this.data[8]-this.data[7]*this.data[2])*i,l=(this.data[1]*this.data[5]-this.data[4]*this.data[2])*i,m=-(this.data[3]*this.data[8]-this.data[6]*this.data[5])*i,n=(this.data[0]*this.data[8]-g)*i,o=-(this.data[0]*this.data[5]-f)*i,p=(this.data[3]*this.data[7]-this.data[6]*this.data[4])*i,q=-(c-e)*i,r=(b-d)*i;return a.data[0]=j,a.data[1]=k,a.data[2]=l,a.data[3]=m,a.data[4]=n,a.data[5]=o,a.data[6]=p,a.data[7]=q,a.data[8]=r,a},a.prototype.add=function(a,b){if(b===null||b===undefined)b=this;for(var c=0;c<=8;c++)b.data[c]=this.data[c]+a.data[c];return b},a.prototype.multiply=function(a,b){if(b===null||b===undefined)b=this;var c=this.data[0]*a.data[0]+this.data[3]*a.data[1]+this.data[6]*a.data[2],d=this.data[1]*a.data[0]+this.data[4]*a.data[1]+this.data[7]*a.data[2],e=this.data[2]*a.data[0]+this.data[5]*a.data[1]+this.data[8]*a.data[2],f=this.data[0]*a.data[3]+this.data[3]*a.data[4]+this.data[6]*a.data[5],g=this.data[1]*a.data[3]+this.data[4]*a.data[4]+this.data[7]*a.data[5],h=this.data[2]*a.data[3]+this.data[5]*a.data[4]+this.data[8]*a.data[5],i=this.data[0]*a.data[6]+this.data[3]*a.data[7]+this.data[6]*a.data[8],j=this.data[1]*a.data[6]+this.data[4]*a.data[7]+this.data[7]*a.data[8],k=this.data[2]*a.data[6]+this.data[5]*a.data[7]+this.data[8]*a.data[8];return b.data[0]=c,b.data[1]=d,b.data[2]=e,b.data[3]=f,b.data[4]=g,b.data[5]=h,b.data[6]=i,b.data[7]=j,b.data[8]=k,b},a.prototype.scale=function(a,b){if(b===null||b===undefined)b=this;for(var c=0;c<=8;c++)b.data[c]=a*this.data[c];return b},a.prototype.transformVector=function(a,b){if(b===null||b===undefined)b=a;var c=a.x*this.data[0]+a.y*this.data[3]+a.z*this.data[6],d=a.x*this.data[1]+a.y*this.data[4]+a.z*this.data[7];return b.z=a.x*this.data[2]+a.y*this.data[5]+a.z*this.data[8],b.x=c,b.y=d,b},a.prototype.transformTransposeVector=function(a,b){if(b===null||b===undefined)b=a;var c=a.x*this.data[0]+a.y*this.data[1]+a.z*this.data[2],d=a.x*this.data[3]+a.y*this.data[4]+a.z*this.data[5];return b.z=a.x*this.data[6]+a.y*this.data[7]+a.z*this.data[8],b.x=c,b.y=d,b},a}();return b}),define("src/matrix4d",["./vector3d","./quaternion","./matrix3d"],function(a,b,c){var d=function(){function b(){typeof Float32Array!==undefined&&Float32Array!==null?this.data=new Float32Array(16):this.data=new Array(16),this.makeIdentity()}return b.prototype.clone=function(a){if(a===null||a===undefined)a=new b;for(var c=0;c<=15;c++)a.data[c]=this.data[c];return a},b.prototype.set=function(a){for(var b=0;b<=15;b++)this.data[b]=a[b];return this},b.prototype.makeIdentity=function(){for(var a=0;a<=15;a++)this.data[a]=0;return this.data[0]=this.data[5]=1,this.data[10]=this.data[15]=1,this},b.prototype.makeTranslation=function(a,b,c){return this.makeIdentity(),this.data[12]=a,this.data[13]=b,this.data[14]=c,this},b.prototype.translate=function(a,b,c,d){if(d===null||d===undefined)d=this;for(var e=0;e<=11;e++)d.data[e]=this.data[e];return d.data[12]=this.data[0]*a+this.data[4]*b+this.data[8]*c+this.data[12],d.data[13]=this.data[1]*a+this.data[5]*b+this.data[9]*c+this.data[13],d.data[14]=this.data[2]*a+this.data[6]*b+this.data[10]*c+this.data[14],d.data[15]=this.data[3]*a+this.data[7]*b+this.data[11]*c+this.data[15],d},b.prototype.makeScale=function(a,b,c){return this.makeIdentity(),this.data[0]=a,this.data[5]=b,this.data[10]=c,this},b.prototype.scale=function(a,b,c,d){if(d===null||d===undefined)d=this;return d.data[0]=this.data[0]*a,d.data[1]=this.data[1]*a,d.data[2]=this.data[2]*a,d.data[3]=this.data[3]*a,d.data[4]=this.data[4]*b,d.data[5]=this.data[5]*b,d.data[6]=this.data[6]*b,d.data[7]=this.data[7]*b,d.data[8]=this.data[8]*c,d.data[9]=this.data[9]*c,d.data[10]=this.data[10]*c,d.data[11]=this.data[11]*c,d.data[12]=this.data[12],d.data[13]=this.data[13],d.data[14]=this.data[14],d.data[15]=this.data[15],d},b.prototype.makeRotation=function(a,b){this.makeIdentity();var c=Math.cos(b),d=Math.sin(b),e=1-c;return a.magnitude()>0&&(a.normalize(),this.data[0]=e*a.x*a.x+c,this.data[1]=e*a.x*a.y+a.z*d,this.data[2]=e*a.z*a.x-a.y*d,this.data[4]=e*a.x*a.y-a.z*d,this.data[5]=e*a.y*a.y+c,this.data[6]=e*a.z*a.y-a.x*d,this.data[8]=e*a.z*a.x+a.y*d,this.data[9]=e*a.y*a.z+a.x*d,this.data[10]=e*a.z*a.z+c),this},b.prototype.transpose=function(a){if(a===null||a===undefined)a=this;var b=this.data[1];return a.data[1]=this.data[4],a.data[4]=b,b=this.data[2],a.data[2]=this.data[8],a.data[8]=b,b=this.data[3],a.data[3]=this.data[12],a.data[12]=b,b=this.data[6],a.data[6]=this.data[9],a.data[9]=b,b=this.data[7],a.data[7]=this.data[13],a.data[13]=b,b=this.data[11],a.data[11]=this.data[14],a.data[14]=b,a},b.prototype.makeFrustum=function(a,b,c,d,e,f){this.makeIdentity();var g=b-a,h=d-c,i=f-e,j=2*e;return this.data[0]=j/g,this.data[5]=j/h,this.data[8]=(b+a)/g,this.data[9]=(d+c)/h,this.data[10]=-(f+e)/i,this.data[11]=-1,this.data[14]=-j*f/i,this.data[15]=0,this},b.prototype.makePerspective=function(a,b,c,d){var e=b*Math.tan(a/(180*Math.PI)/2);return this.makeFrustum(-e,e,-e/d,e/d,b,c)},b.prototype.makeOrthographic=function(a,b,c,d,e,f){var g=b-a,h=d-c,i=f-e;return this.data[0]=2/g,this.data[1]=0,this.data[2]=0,this.data[3]=0,this.data[4]=0,this.data[5]=2/h,this.data[6]=0,this.data[7]=0,this.data[8]=0,this.data[9]=0,this.data[10]=-2/i,this.data[11]=0,this.data[12]=-(a+b)/g,this.data[13]=-(d+c)/h,this.data[14]=-(f+e)/i,this.data[15]=1,this},b.prototype.makeFromQuaternion=function(a){return this.data[0]=1-(2*a.j*a.j+2*a.k*a.k),this.data[1]=2*a.i*a.j-2*a.k*a.r,this.data[2]=2*a.i*a.k+2*a.j*a.r,this.data[3]=0,this.data[4]=2*a.i*a.j+2*a.k*a.r,this.data[5]=1-(2*a.i*a.i+2*a.k*a.k),this.data[6]=2*a.j*a.k-2*a.i*a.r,this.data[7]=0,this.data[8]=2*a.i*a.k-2*a.j*a.r,this.data[9]=2*a.j*a.k+2*a.i*a.r,this.data[10]=1-(2*a.i*a.i+2*a.j*a.j),this.data[11]=0,this.data[12]=this.data[13]=this.data[14]=0,this.data[15]=1,this},b.prototype.makeFromPositionAndOrientation=function(a,b){return this.data[0]=1-(2*b.j*b.j+2*b.k*b.k),this.data[1]=2*b.i*b.j-2*b.k*b.r,this.data[2]=2*b.i*b.k+2*b.j*b.r,this.data[3]=0,this.data[4]=2*b.i*b.j+2*b.k*b.r,this.data[5]=1-(2*b.i*b.i+2*b.k*b.k),this.data[6]=2*b.j*b.k-2*b.i*b.r,this.data[7]=0,this.data[8]=2*b.i*b.k-2*b.j*b.r,this.data[9]=2*b.j*b.k+2*b.i*b.r,this.data[10]=1-(2*b.i*b.i+2*b.j*b.j),this.data[11]=0,this.data[12]=a.x,this.data[13]=a.y,this.data[14]=a.z,this.data[15]=1,this},b.prototype.add=function(a,b){if(b===null||b===undefined)b=this;for(var c=0;c<=15;c++)b.data[c]=this.data[c]+a.data[c];return b},b.prototype.multiply=function(a,b){if(b===null||b===undefined)b=this;var c=this.data[0]*a.data[0]+this.data[4]*a.data[1]+this.data[8]*a.data[2]+this.data[12]*a.data[3],d=this.data[1]*a.data[0]+this.data[5]*a.data[1]+this.data[9]*a.data[2]+this.data[13]*a.data[3],e=this.data[2]*a.data[0]+this.data[6]*a.data[1]+this.data[10]*a.data[2]+this.data[14]*a.data[3],f=this.data[3]*a.data[0]+this.data[7]*a.data[1]+this.data[11]*a.data[2]+this.data[15]*a.data[3],g=this.data[0]*a.data[4]+this.data[4]*a.data[5]+this.data[8]*a.data[6]+this.data[12]*a.data[7],h=this.data[1]*a.data[4]+this.data[5]*a.data[5]+this.data[9]*a.data[6]+this.data[13]*a.data[7],i=this.data[2]*a.data[4]+this.data[6]*a.data[5]+this.data[10]*a.data[6]+this.data[14]*a.data[7],j=this.data[3]*a.data[4]+this.data[7]*a.data[5]+this.data[11]*a.data[6]+this.data[15]*a.data[7],k=this.data[0]*a.data[8]+this.data[4]*a.data[9]+this.data[8]*a.data[10]+this.data[12]*a.data[11],l=this.data[1]*a.data[8]+this.data[5]*a.data[9]+this.data[9]*a.data[10]+this.data[13]*a.data[11],m=this.data[2]*a.data[8]+this.data[6]*a.data[9]+this.data[10]*a.data[10]+this.data[14]*a.data[11],n=this.data[3]*a.data[8]+this.data[7]*a.data[9]+this.data[11]*a.data[10]+this.data[15]*a.data[11],o=this.data[0]*a.data[12]+this.data[4]*a.data[13]+this.data[8]*a.data[14]+this.data[12]*a.data[15],p=this.data[1]*a.data[12]+this.data[5]*a.data[13]+this.data[9]*a.data[14]+this.data[13]*a.data[15],q=this.data[2]*a.data[12]+this.data[6]*a.data[13]+this.data[10]*a.data[14]+this.data[14]*a.data[15],r=this.data[3]*a.data[12]+this.data[7]*a.data[13]+this.data[11]*a.data[14]+this.data[15]*a.data[15];return b.data[0]=c,b.data[1]=d,b.data[2]=e,b.data[3]=f,b.data[4]=g,b.data[5]=h,b.data[6]=i,b.data[7]=j,b.data[8]=k,b.data[9]=l,b.data[10]=m,b.data[11]=n,b.data[12]=o,b.data[13]=p,b.data[14]=q,b.data[15]=r,b},b.prototype.axisVector=function(b,c){if(c===null||c===undefined)c=new a;return c.set(this.data[b*4],this.data[b*4+1],this.data[b*4+2])},b.prototype.transformVector=function(a,b){if(b===null||b===undefined)b=a;var c=a.x*this.data[0]+a.y*this.data[4]+a.z*this.data[8]+this.data[12],d=a.x*this.data[1]+a.y*this.data[5]+a.z*this.data[9]+this.data[13];return b.z=a.x*this.data[2]+a.y*this.data[6]+a.z*this.data[10]+this.data[14],b.x=c,b.y=d,b},b.prototype.transformInverseVector=function(a,b){if(b===null||b===undefined)b=a;var c=this.data,d=a.x-c[12],e=a.y-c[13],f=a.z-c[14];return b.x=d*c[0]+e*c[1]+f*c[2],b.y=d*c[4]+e*c[5]+f*c[6],b.z=d*c[8]+e*c[9]+f*c[10],b},b.prototype.transformMatrix3D=function(a,b){if(b===null||b===undefined)b=a;var c=this.data,d=this.data,e=c[0]*d[0]+c[4]*d[1]+c[8]*d[2],f=c[0]*d[3]+c[4]*d[4]+c[8]*d[5],g=c[0]*d[6]+c[4]*d[7]+c[8]*d[8],h=c[1]*d[0]+c[5]*d[1]+c[9]*d[2],i=c[1]*d[3]+c[5]*d[4]+c[9]*d[5],j=c[1]*d[6]+c[5]*d[7]+c[9]*d[8],k=c[2]*d[0]+c[6]*d[1]+c[10]*d[2],l=c[2]*d[3]+c[6]*d[4]+c[10]*d[5],m=c[2]*d[6]+c[6]*d[7]+c[10]*d[8];b.data[0]=e*c[0]+f*c[4]+g*c[8],b.data[1]=h*c[0]+i*c[4]+j*c[8],b.data[2]=k*c[0]+l*c[4]+m*c[8],b.data[3]=e*c[1]+f*c[5]+g*c[9],b.data[4]=h*c[1]+i*c[5]+j*c[9],b.data[5]=k*c[1]+l*c[5]+m*c[9],b.data[6]=e*c[2]+f*c[6]+g*c[10],b.data[7]=h*c[2]+i*c[6]+j*c[10],b.data[8]=k*c[2]+l*c[6]+m*c[10]},b}();return d}),define("src/goom-math",["./vector3d","./quaternion","./matrix3d","./matrix4d"],function(a,b,c,d){return Mathematics={},Mathematics.Vector3D=a,Mathematics.Quaternion=b,Mathematics.Matrix3D=c,Mathematics.Matrix4D=d,Mathematics})